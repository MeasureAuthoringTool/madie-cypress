library SimpleFhirMeasure version '0.0.001'

using FHIR version '4.0.1'

include FHIRHelpers version '4.1.000' called FHIRHelpers

parameter "Measurement Period" Interval<DateTime>

context Patient

define "ipp":
  exists ["Encounter"] E where E.period.start during "Measurement Period"

{home}define "denom":
{home}  "ipp"

{home}define "num":
{home}  exists ["Encounter"] E where E.status ~ 'finished'

{home}define "numeratorExclusion":
{home}    "num"

{home}define function ToCode(coding FHIR.Coding):
{home} if coding is null then
{home}   null
{home}      else
{home}        System.Code {
{home}           code: coding.code.value,
{home}           system: coding.system.value,
{home}           version: coding.version.value,
{home}           display: coding.display.value
{home}           }

{home}define function fun(notPascalCase Integer ):
{home}  true

{home}define function "isFinishedEncounter"(Enc Encounter):
{home}  true
{del}{del}{del}{del}{del}{del}{del}{del}{del}{del}{del}{del}{del}{del}
